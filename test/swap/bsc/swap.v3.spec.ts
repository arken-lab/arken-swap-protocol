import _ from 'lodash'

import { testOnly } from '../../helpers/scope'
import { encodeOrderToHex } from '../../helpers/tester'
import { ADDRESS_ONE, ADDRESS_ZERO, RouterInterface } from '../../helpers/types'
import { SwapTestParamsV3, testSwap } from '../testSwap.v3.spec'
import {
  CONSTRUCTOR_PARAMS,
  DEX,
  DODO,
  findDexName,
  TOKENS,
  VYPER_CONFIG,
  WALLETS,
} from './constants'

const TESTS: Array<SwapTestParamsV3> = [
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.DAI.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.DAI.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ONE,
        lpAddress: '0xf6f5CE9a91Dd4FAe2d2eD92E25F2A4dc8564F174',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.0025,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: encodeOrderToHex({
          signature:
            '0xbe2fd05dc2dcdba9dbbd12358cf35f9feeeea91c50866da96a7f5bfb8616345476a0d4df3273051dc30b9c696ab914845f39239fef7fd909a44a29a21d58822e1c',
          orderHash:
            '0x6051b98d75518ed48bb6e20bf6c65d22781be7dc508dd23d44dfb6f9074d67f9',
          createDateTime: '2022-03-15T00:58:35.485Z',
          remainingMakerAmount: '3514700000000000000',
          makerBalance: '3514782619198235270',
          makerAllowance:
            '115792089237316195423570985008687907853269984665640564039457584007913129639935',
          data: {
            makerAsset: '0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c',
            takerAsset: '0xe9e7cea3dedca5984780bafc599bd69add087d56',
            getMakerAmount:
              '0xf4a215c300000000000000000000000000000000000000000000000030c6b9074010c000000000000000000000000000000000000000000000000047425250979876f960',
            getTakerAmount:
              '0x296637bf00000000000000000000000000000000000000000000000030c6b9074010c000000000000000000000000000000000000000000000000047425250979876f960',
            makerAssetData: '0x',
            takerAssetData: '0x',
            salt: '23146580215',
            permit: '0x',
            predicate:
              '0x961d5b1e000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000001e38eff998df9d3669e32f4ff400031385bf63620000000000000000000000001e38eff998df9d3669e32f4ff400031385bf63620000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000044cf6fc6e3000000000000000000000000a3f90e801cba1f94eb6501146e4e0e791444e4d3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002463592c2b000000000000000000000000000000000000000000000000000000006231363600000000000000000000000000000000000000000000000000000000',
            interaction: '0x',
            receiver: '0x0000000000000000000000000000000000000000',
            allowedSender: '0x0000000000000000000000000000000000000000',
            makingAmount: '3514700000000000000',
            takingAmount: '1314497799999999900000',
            maker: '0xa3f90e801cba1f94eb6501146e4e0e791444e4d3',
          },
          makerRate: '373.999999999999971548',
          takerRate: '0.002673796791443850',
        }),
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.DAI.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.DAI.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 50000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: ADDRESS_ZERO,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.LIMIT_ORDER,
        dexInterface: RouterInterface.LIMIT_ORDER_PROTOCOL_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.DOPX,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.DOPX.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x9661a41eea814a9b13f2c1d844106cef6c3a4a43',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.TWINDEX,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x559e3d9611e9cb8a77c11335bdac49621382188b',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BAKERY,
        dexInterface: RouterInterface.BAKERY,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x340192d37d95fb609874b1db6145ed26d1e47744',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.MDEX,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x51e6d27fa57373d8d4c256231241053a70cb1d93',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.APE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANTHER,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.CAKE,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: '0x804678fa97d91b974ec2af3c843270886528a9e6',
        lpAddress: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANTHER,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.CAKE.address,
        from: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        to: ADDRESS_ZERO,
        lpAddress: '0x804678fa97d91b974ec2af3c843270886528a9e6',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x5162f992EDF7101637446ecCcD5943A9dcC63A8A',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DOPPLE,
        dexInterface: RouterInterface.DOPPLE,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.ELLIPSIS,
        direction: 0,
        fromTokenIndex: VYPER_CONFIG[DEX.ELLIPSIS][TOKENS.BUSD.address],
        toTokenIndex: VYPER_CONFIG[DEX.ELLIPSIS][TOKENS.USDC.address],
        routerAddress: DEX.ELLIPSIS,
        dexInterface: RouterInterface.VYPER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },

  // SOURCE FEE
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ONE,
        lpAddress: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ONE,
        lpAddress: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ONE,
        lpAddress: '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.DOPX,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.DOPX.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x9661a41eea814a9b13f2c1d844106cef6c3a4a43',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.TWINDEX,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 10,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ONE,
        lpAddress: '0x559e3d9611e9cb8a77c11335bdac49621382188b',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BAKERY,
        dexInterface: RouterInterface.BAKERY,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x340192d37d95fb609874b1db6145ed26d1e47744',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.MDEX,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x51e6d27fa57373d8d4c256231241053a70cb1d93',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.APE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.BNB,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANTHER,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.001,
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.CAKE,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: '0x804678fa97d91b974ec2af3c843270886528a9e6',
        lpAddress: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANTHER,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.CAKE.address,
        from: '0x6af4c4433474b2f8ba385ad62b23299c82846783',
        to: ADDRESS_ONE,
        lpAddress: '0x804678fa97d91b974ec2af3c843270886528a9e6',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x5162f992EDF7101637446ecCcD5943A9dcC63A8A',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DOPPLE,
        dexInterface: RouterInterface.DOPPLE,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.ELLIPSIS,
        direction: 0,
        fromTokenIndex: VYPER_CONFIG[DEX.ELLIPSIS][TOKENS.BUSD.address],
        toTokenIndex: VYPER_CONFIG[DEX.ELLIPSIS][TOKENS.USDC.address],
        routerAddress: DEX.ELLIPSIS,
        dexInterface: RouterInterface.VYPER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: '0x0000023Cbc437683AeC074E3Cb75aD38ae2E87e1',
    amountIn: 21392466058872987769 / 10 ** 18,
    amountOutMin: 48083269001071633 / 10 ** 18,
    srcTokenData: TOKENS.USDT,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x8840c6252e2e86e545defb6da98b2a0e26d8c1ba',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: '0x3a6d8ca21d1cf76f653a67577fa0d27453350dd8',
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9990,
        order: '0x',
      },
    ],
  },

  {
    // only: true,
    walletAddr: '0x0000023Cbc437683AeC074E3Cb75aD38ae2E87e1',
    amountIn: '1000000000000000000',
    amountOutMin: '808534069014291192', // '908534069014291192',
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.WBNB,
    isSourceFee: false,
    isRouterSource: true,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: '0x4fa7163e153419e0e1064e418dd7a99314ed27b6',
        from: ADDRESS_ZERO,
        to: '0x1c4a479ce71f41a68d4c2de26854fc99f310918d',
        lpAddress: '0xf23bad605e94de0e3b60c9718a43a94a5af43915',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9975,
        order: '0x',
      },
      {
        fromToken: '0x4fa7163e153419e0e1064e418dd7a99314ed27b6',
        toToken: TOKENS.WBNB.address,
        from: '0xf23bad605e94de0e3b60c9718a43a94a5af43915',
        to: ADDRESS_ZERO,
        lpAddress: '0x1c4a479ce71f41a68d4c2de26854fc99f310918d',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.APE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9975,
        order: '0x',
      },
    ],
  },

  // kyberDMM
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: '1000000000000000000',
    amountOutMin: '30000000000000000000',
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0xec303ce1edbebf7e71fc7b350341bb6a6a7a6381',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: '1000000000000000000',
    amountOutMin: '100000000000000',
    srcTokenData: TOKENS.USDT,
    dstTokenData: TOKENS.BNB,
    isSourceFee: false,
    isRouterSource: false,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.WBNB.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0xec303ce1edbebf7e71fc7b350341bb6a6a7a6381',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: '1000000000000000000',
    amountOutMin: '30000000000000000000',
    srcTokenData: TOKENS.BNB,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: true,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.WBNB.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: '0xc3dac2049616326e7d596ce52062789d96373b55',
        lpAddress: '0xec303ce1edbebf7e71fc7b350341bb6a6a7a6381',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.BUSD.address,
        from: '0xec303ce1edbebf7e71fc7b350341bb6a6a7a6381',
        to: ADDRESS_ZERO,
        lpAddress: '0xc3dac2049616326e7d596ce52062789d96373b55',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: '1000000000000000000',
    amountOutMin: '800000000000000000',
    srcTokenData: TOKENS.USDT,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        lpAddress: '0xc3dac2049616326e7d596ce52062789d96373b55',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDC.address,
        from: '0xc3dac2049616326e7d596ce52062789d96373b55',
        to: ADDRESS_ZERO,
        lpAddress: '0x2354ef4df11afacb85a5c7f98b624072eccddbb1',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9975,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: '1000000000000000000',
    amountOutMin: '800000000000000000',
    srcTokenData: TOKENS.BUSD,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    isAmountParsed: true,
    routes: [
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0xc3dac2049616326e7d596ce52062789d96373b55',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 50000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.BUSD.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x7efaef62fddcca950418312c6c91aef321375a00',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9975,
        order: '0x',
      },
    ],
  },
  {
    // isSourceFee = false && stopLimitFee > minimumStopLimitFee && super split paths
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 10,
    amountOutMin: 10000,
    srcTokenData: TOKENS.ETH,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.ETH.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0xea26b78255df2bbc31c1ebf60010d78670185bd0',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 50000000,
        amountAfterFee: 9975,
        order: '0x',
      },
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x160caed03795365f3a589f10c379ffa7d75d4e76',
        direction: 0,
        fromTokenIndex: 1,
        toTokenIndex: 0,
        routerAddress: DEX.ELLIPSIS,
        dexInterface: RouterInterface.VYPER,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.ETH.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x531febfeb9a61d948c384acfbe6dcc51057aea7e',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 50000000,
        amountAfterFee: 9975,
        order: '0x',
      },
      {
        fromToken: TOKENS.ETH.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x0fb881c078434b1c0e4d0b64d8c64d12078b7ce2',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.MDEX,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0xc3dac2049616326e7d596ce52062789d96373b55',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // isSourceFee = false && stopLimitFee > minimumStopLimitFee && super split paths
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 100,
    srcTokenData: TOKENS.ETH,
    dstTokenData: TOKENS.BUSD,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.ETH.address,
        toToken: TOKENS.BTCB.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.BTCB.address,
        toToken: TOKENS.BUSD.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0xf45cd219aef8618a92baa7ad848364a158a24f33',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.PANCAKE,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9975,
        order: '0x',
      },
    ],
  },
  {
    // isSourceFee = false && stopLimitFee > minimumStopLimitFee && super split paths
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 1,
    amountOutMin: 1000,
    srcTokenData: TOKENS.ETH,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.ETH.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // isSourceFee = false && stopLimitFee > minimumStopLimitFee && super split paths
    // only: true,
    walletAddr: WALLETS.WHALE1,
    amountIn: 3,
    amountOutMin: 0.0001,
    srcTokenData: TOKENS.USDT,
    dstTokenData: TOKENS.BTCB,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDT.address,
        toToken: TOKENS.BTCB.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 1000,
        order: '0x',
      },
    ],
  },
]
testOnly('bsc', 'swap', () =>
  describe.only('Swap v3', () => {
    testSwap(
      TESTS,
      findDexName,
      CONSTRUCTOR_PARAMS,
      WALLETS.WHALE1,
      WALLETS.FEE
    )
  })
)
