import _ from 'lodash'

import { testOnly } from '../../helpers/scope'
import { convertGoObjectToTestParams } from '../../helpers/tester'
import { ADDRESS_ONE, ADDRESS_ZERO, RouterInterface } from '../../helpers/types'
import { SwapTestParamsV3, testSwap } from '../testSwap.v3.spec'
import {
  BALANCER_POOLS,
  CONSTRUCTOR_PARAMS,
  DEX,
  DODO,
  findDexName,
  TOKENS,
  VYPER_CONFIG,
  WALLETS,
} from './constants'

const TESTS: Array<SwapTestParamsV3> = [
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x2cf7252e74036d1da831d11089d326296e64a728',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WETH_DFYN.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x4f5df10b9991482bcd2db19dae1fd0e0184397c2',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DFYN,
        dexInterface: RouterInterface.DFYN,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH_DFYN.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x4f5df10b9991482bcd2db19dae1fd0e0184397c2',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DFYN,
        dexInterface: RouterInterface.DFYN,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV2.WMATIC_USDC,
        direction: 1,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV2.WMATIC_USDC,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV1.USDC_USDT,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V1,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.00001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.SHI3LD,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ONE,
        to: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        lpAddress: DODO.poolV2.WETH_USDC,
        direction: 1,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WETH.address,
        toToken: TOKENS.WMATIC.address,
        from: DODO.poolV2.WETH_USDC,
        to: '0x982c1f90381e31e7b7dbba8708126532b7cb7df6',
        lpAddress: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.SHI3LD.address,
        from: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        to: ADDRESS_ZERO,
        lpAddress: '0x982c1f90381e31e7b7dbba8708126532b7cb7df6',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.0001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.WETH,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.0001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.WETH,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },

  // source fee = true
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ONE,
        lpAddress: '0x2cf7252e74036d1da831d11089d326296e64a728',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ONE,
        lpAddress: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WETH_DFYN.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ONE,
        lpAddress: '0x4f5df10b9991482bcd2db19dae1fd0e0184397c2',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DFYN,
        dexInterface: RouterInterface.DFYN,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH_DFYN.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x4f5df10b9991482bcd2db19dae1fd0e0184397c2',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.DFYN,
        dexInterface: RouterInterface.DFYN,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV2.WMATIC_USDC,
        direction: 1,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.01,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV2.WMATIC_USDC,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.9,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DODO.poolV1.USDC_USDT,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V1,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.00001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.SHI3LD,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ONE,
        to: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        lpAddress: DODO.poolV2.WETH_USDC,
        direction: 1,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WETH.address,
        toToken: TOKENS.WMATIC.address,
        from: DODO.poolV2.WETH_USDC,
        to: '0x982c1f90381e31e7b7dbba8708126532b7cb7df6',
        lpAddress: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.SHI3LD.address,
        from: '0xadbf1854e5883eb8aa7baf50705338739e558e5b',
        to: ADDRESS_ZERO,
        lpAddress: '0x982c1f90381e31e7b7dbba8708126532b7cb7df6',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.0001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.WETH,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.0001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.WETH,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.WETH.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: BALANCER_POOLS.WMATIC_USD_WETH_BAL,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.BALANCER,
        dexInterface: RouterInterface.BALANCER,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ONE,
        lpAddress: '0x2cf7252e74036d1da831d11089d326296e64a728',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 50000000,
        amountAfterFee: 9970,
        order: '0x',
      },
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ONE,
        lpAddress: '0x2cf7252e74036d1da831d11089d326296e64a728',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },

  // kyberDMM
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x75b64428086fd78f480b1e05a8ccfd8071994fa9',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.MATIC,
    isSourceFee: false,
    isRouterSource: false,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ONE,
        to: ADDRESS_ZERO,
        lpAddress: '0x75b64428086fd78f480b1e05a8ccfd8071994fa9',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.1,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: true,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: '0x604229c960e5cacf2aaeac8be68ac07ba9df81c3',
        lpAddress: '0x2b68bd68f551ce4fdbc81d0ed841b7d0b1fdc621',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.KYBER_DMM,
        dexInterface: RouterInterface.KYBER_DMM,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDT.address,
        from: '0x2b68bd68f551ce4fdbc81d0ed841b7d0b1fdc621',
        to: ADDRESS_ZERO,
        lpAddress: '0x604229c960e5cacf2aaeac8be68ac07ba9df81c3',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },

  // WooFi
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 10000,
    srcTokenData: TOKENS.WBTC,
    dstTokenData: TOKENS.USDT,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBTC.address,
        toToken: TOKENS.WMATIC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDT.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: '0x604229c960e5cacf2aaeac8be68ac07ba9df81c3',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 10000,
    srcTokenData: TOKENS.WBTC,
    dstTokenData: TOKENS.USDC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WBTC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.00001,
    srcTokenData: TOKENS.USDC,
    dstTokenData: TOKENS.WBTC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WBTC.address,
        from: ADDRESS_ZERO,
        to: ADDRESS_ZERO,
        lpAddress: DEX.WOO_FI,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.WOO_FI,
        dexInterface: RouterInterface.WOO_FI,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
    ],
  },

  convertGoObjectToTestParams(
    {
      SrcToken: '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',
      DstToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
      AmountIn: 577348893708599903,
      AmountOutMin: 215256034471870,
      To: '0x0000023cbc437683aec074e3cb75ad38ae2e87e1',
      Routes: [
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0xf461f2240b66d55dcf9059e26c022160c06863bf',
          FromToken: '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',
          ToToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x7eb878107af0440f9e776f999ce053d277c8aca8',
          FromToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          ToToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 62000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x47ebc05bc9476c9ae36679fbc3cd7bbc83a65190',
          FromToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          ToToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
      ],
      IsRouterSource: true,
      IsSourceFee: false,
    },
    false
  ),
  convertGoObjectToTestParams(
    {
      SrcToken: '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',
      DstToken: '0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39',
      AmountIn: 577348893708599903,
      AmountOutMin: 47481591618445950,
      To: '0x0000023cbc437683aec074e3cb75ad38ae2e87e1',
      Routes: [
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x0297e37f1873d2dab4487aa67cd56b58e2f27875',
          FromToken: '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',
          ToToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x37306aec67220b11991416e1e7a97f9caeeaff7d',
          FromToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          ToToken: '0x0b3f868e0be5597d5db7feb59e1cadbb0fdda50a',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 7500000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0xeb58be542e77195355d90100beb07105b9bd295e',
          FromToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          ToToken: '0x0b3f868e0be5597d5db7feb59e1cadbb0fdda50a',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0x1b02da8cb0d097eb8d57a175b88c7d8b47997506',
          LpAddress: '0xb5846453b67d0b4b4ce655930cf6e4129f4416d7',
          FromToken: '0x0b3f868e0be5597d5db7feb59e1cadbb0fdda50a',
          ToToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x36128d5436d2d70cab39c9af9cce146c38554ff0',
          FromToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          ToToken: '0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000001',
          Part: 52500000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0xa102072a4c07f06ec3b4900fdc4c7b80b6c57429',
          LpAddress: '0x4f19ad546c66016042623b7ade88923c161e3a3a',
          FromToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          ToToken: '0x53e0bca35ec356bd5dddfebbd1fc0fd03fabad39',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000001',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 7,
        },
      ],
      IsRouterSource: true,
      IsSourceFee: true,
    },
    false
  ),

  convertGoObjectToTestParams(
    {
      SrcToken: '0xdf7837de1f2fa4631d716cf2502f8b230f1dcc32',
      DstToken: '0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',
      AmountIn: 930,
      AmountOutMin: 58931236911769012,
      To: '0x0000023cbc437683aec074e3cb75ad38ae2e87e1',
      Routes: [
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x186084ff790c65088ba694df11758fae4943ee9e',
          FromToken: '0xdf7837de1f2fa4631d716cf2502f8b230f1dcc32',
          ToToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 30000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0x3a1d87f206d12415f5b0a33e786967680aab4f6d',
          LpAddress: '0x6d86f063e08a59e727e1a8a34a45d283057cac0e',
          FromToken: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
          ToToken: '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9980,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0xa5e0829caced8ffdd4de3c43696c57f7d7a678ff',
          LpAddress: '0x93b50071e42716cf8bee66ba878619271944f6f4',
          FromToken: '0xdf7837de1f2fa4631d716cf2502f8b230f1dcc32',
          ToToken: '0x5fbda31a2be6af41329aca9f18e8959aa89b372b',
          From: '0x0000000000000000000000000000000000000000',
          To: '0xeb8ef7926d9cd80aeca1f240901e76ffa33b4adf',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0xa5e0829caced8ffdd4de3c43696c57f7d7a678ff',
          LpAddress: '0xeb8ef7926d9cd80aeca1f240901e76ffa33b4adf',
          FromToken: '0x5fbda31a2be6af41329aca9f18e8959aa89b372b',
          ToToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',
          From: '0x93b50071e42716cf8bee66ba878619271944f6f4',
          To: '0x273c39ebd4e0c49f8cc6e5a2b3c0e4ca355b5352',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0x94930a328162957ff1dd48900af67b5439336cbd',
          LpAddress: '0x273c39ebd4e0c49f8cc6e5a2b3c0e4ca355b5352',
          FromToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',
          ToToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          From: '0xeb8ef7926d9cd80aeca1f240901e76ffa33b4adf',
          To: '0x111bc78ae824d5668ecf7224f34dedc3c6bd45e1',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9976,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0xa5e0829caced8ffdd4de3c43696c57f7d7a678ff',
          LpAddress: '0x111bc78ae824d5668ecf7224f34dedc3c6bd45e1',
          FromToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',
          ToToken: '0x3cef98bb43d732e2f285ee605a8158cde967d219',
          From: '0x273c39ebd4e0c49f8cc6e5a2b3c0e4ca355b5352',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 0,
        },
        {
          RouterAddress: '0xba12222222228d8ba445958a75a0704d566bf2c8',
          LpAddress: '0x5844d529e20ba8040670e2f19a3f139e88791ffe',
          FromToken: '0x3cef98bb43d732e2f285ee605a8158cde967d219',
          ToToken: '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 33000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 10000,
          Order: '',
          DexInterface: 8,
        },
        {
          RouterAddress: '0x1b02da8cb0d097eb8d57a175b88c7d8b47997506',
          LpAddress: '0x31019e5ebc6a834c9f6333b948758e6c7985fd98',
          FromToken: '0x3cef98bb43d732e2f285ee605a8158cde967d219',
          ToToken: '0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270',
          From: '0x0000000000000000000000000000000000000000',
          To: '0x0000000000000000000000000000000000000000',
          Part: 100000000,
          Direction: 0,
          FromTokenIndex: 0,
          ToTokenIndex: 0,
          AmountAfterFee: 9970,
          Order: '',
          DexInterface: 0,
        },
      ],
      IsRouterSource: true,
      IsSourceFee: false,
    },
    false
  ),
  {
    // only: true,
    walletAddr: WALLETS.WHALE2,
    amountIn: 1,
    amountOutMin: 0.8,
    srcTokenData: TOKENS.MATIC,
    dstTokenData: TOKENS.WMATIC,
    isSourceFee: false,
    isRouterSource: true,
    routes: [
      {
        fromToken: TOKENS.WMATIC.address,
        toToken: TOKENS.USDC.address,
        from: ADDRESS_ZERO,
        to: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        lpAddress: DODO.poolV2.WMATIC_USDC,
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DODO.routerAddress,
        dexInterface: RouterInterface.DODO_V2,
        part: 100000000,
        amountAfterFee: 10000,
        order: '0x',
      },
      {
        fromToken: TOKENS.USDC.address,
        toToken: TOKENS.WMATIC.address,
        from: DODO.poolV2.WMATIC_USDC,
        to: ADDRESS_ZERO,
        lpAddress: '0x6e7a5fafcec6bb1e78bae2a1f0b612012bf14827',
        direction: 0,
        fromTokenIndex: 0,
        toTokenIndex: 0,
        routerAddress: DEX.QUICK,
        dexInterface: RouterInterface.UNISWAP_V2,
        part: 100000000,
        amountAfterFee: 9970,
        order: '0x',
      },
    ],
  },
]

testOnly('polygon', 'swap', () =>
  describe.only('Swap v3', () => {
    testSwap(
      TESTS,
      findDexName,
      CONSTRUCTOR_PARAMS,
      WALLETS.WHALE2,
      WALLETS.FEE
    )
  })
)
